# ビルド方法

## 準備

C++17 サポートのC++コンパイラ

## ビルド

必要に応じてクロスコンパイラのprefixを追加
``` 
$ export CROSS_COMPILE=xxxx 
```

```
$ make 
```

# 動かし方

``` 
$ ./dmdkctl [-d raw_blk_device] [-k keyfile] 
```

 - -d  
   作成するDM Deviceが使用するraw block deviceを指定する。  
   　raw_blk_device: 使用するブロックデバイスのデバイスファイル。指定がない場合は、/dev/sdb1を指定します。  
        例： /dev/sda1
 - -k  
   生の鍵(バイナリ)を格納したファイルのファイル名を指定する。サイズが64byteでない場合は、メッセージを出力し乱数で鍵を生成します。  
   　keyfile：ファイル名。指定がない場合は乱数を鍵にして暗号化します。

# 説明
  dmdkctlは、指定されたブロックデバイスの上に、暗号化されていないblockアクセスを一律に暗号化するblockデバイスを作成するコマンドです。  
  暗号化アルゴリズムは、AES-XTS256を使用します。  
  現時点では、対象にするブロックデバイスのサイズは16MB固定です。（ソースコードの修正が必要です）

